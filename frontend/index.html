<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Layout</title>
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body>
    <!-- Header Section -->
    <header>
        <nav>
            <!-- Left-aligned links -->
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="create_video.html">Create Video</a>
                <!-- Other links -->
            </div>
    
            <!-- Search Bar -->
            <div class="search-container">
                <input type="text" placeholder="Enter Video Name..." id="search-input">
                <button type="button" id="search-button">Search</button>
            </div>
                   
    
            <!-- Right-aligned links -->
            <div class="auth-links">
                <a href="login.html">Login</a>
                <a href="register.html">Register</a>
            </div>
        </nav>
    </header>
    

    <!-- Upper Part: World Map, Video Ranking, Category Selection -->
    <div class="upper-part">
        <section class="world-map">
            <h2>World Map</h2>
            <div id="map-placeholder">Map will go here</div>
        </section>

        <section class="video-ranking">
            <h2>Ranking Top 10 Videos</h2>
            <div id="ranking-placeholder">Rankings will go here</div>
        </section>

        <aside class="category-selection">
                <h2>Specific for Category</h2>
            <div class="category-scroll-area">
                <form id="category-form">
                    <div class="categories">
                        <!-- Category checkboxes will be generated by JavaScript -->
                    </div>
                    <button type="submit" id="submit-button">Submit</button>
                </form>
            </div>
        </aside>
    </div>

    <!-- Lower Part: Hot Tags, Word Cloud, Date and Time -->
    <div class="lower-part">
        <section class="hot-tags">
            <h2>Top 10 Hot Tags</h2>
            <ul id="tags-placeholder">
                <li>#Tag1</li>
                <!-- More tags -->
            </ul>
        </section>

        <section class="word-cloud">
            <div>
                <h1 id="normal">Word Cloud</h1>
                <div id="container" style="height: 400px;"></div>
                <script src="dist/js2wordcloud.js"></script>
                <script>
                    // Fetch category count data from the server
                    fetch('http://localhost:4000/category/count')
                    .then(response => response.json())
                    .then(data => {
                        // Assuming data is in the format: {"data": [["Category1", Count1], ["Category2", Count2]]}
                        const wordCloudData = data.data.map(item => [item[0], item[1]]);
                        
                        var option = {
                            tooltip: {
                                show: true,
                                formatter: function(item) {
                                    return item[0] + ': ' + item[1] + '<br>' + 'world cloud';
                                }
                            },
                            list: wordCloudData, // Use the fetched data for the word cloud list
                            color: '#15a4fa',
                            shape: 'circle',
                            ellipticity: 1
                        };
                        
                        var wc = new Js2WordCloud(document.getElementById('container'));
                        wc.setOption(option);
                    })

                    .catch(error => {
                        console.error('Error fetching the word cloud data:', error);
                    });

                    wc.showLoading({
                        backgroundColor: '#fff',
                        text: 'Loading...',
                        effect: 'spin'
                    })
                    setTimeout(function() {
                        wc.hideLoading()
                        wc.setOption(option)
                    }, 2000)
            
                    setTimeout(function() {
                        wc.setOption(option)
                    }, 6000)
            
                </script>
            </div>
        </section>

        <section class="date-time">
            <h2>Date and Time</h2>
            <div id="datetime-placeholder">Date/time will go here</div>
        </section>
    </div>

    <!-- Footer Section -->
    <footer>
        <p>&copy; 2023 Your Website Name</p>
    </footer>

    <script src="script.js"></script>
    <script src="wordCloudData.js"></script>

    <script>
        // Fetch category count data from the server
        fetch('http://localhost:4000/category/count')
        .then(response => response.json())
        .then(data => {
            const wordCloudData = data.data.map(item => [item[0], item[1]]);
            // Assuming you have a word cloud library and initialization code:
            var option = {
                // ... your word cloud options ...
                list: wordCloudData
                // ... other options ...
            };
            var wc = new Js2WordCloud(document.getElementById('container'));
            wc.setOption(option);
        })
        .catch(error => {
            console.error('Error fetching the word cloud data:', error);
        });
    </script>


    <!-- Popup Modal -->
    <div id="popup-modal" class="modal">
    <!-- Modal content -->
        <div class="modal-content">
            <span class="close">&times;</span>
            <p>Search results will go here...</p>
        </div>
    </div>

        
</body>
</html>
